#!/usr/bin/env pwsh

# ----------------------------
# Centralized pre-commit hook
# ----------------------------

echo "ğŸ”¹ Running pre-commit checks..."

# ----------------------------
# Candidate-client lint & format
# ----------------------------
cd apps/candidate-client || exit 1
echo "â†’ Checking Candidate-client..."
make lint-candidate format-check-candidate
if [ $? -ne 0 ]; then
  echo "âŒ Candidate-client lint/format failed. Commit aborted."
  exit 1
fi
cd ../../

# ----------------------------
# Recruiter-client lint & format
# ----------------------------
cd apps/recruiter-client || exit 1
echo "â†’ Checking Recruiter-client..."
make lint-recruiter format-check-recruiter
if [ $? -ne 0 ]; then
  echo "âŒ Recruiter-client lint/format failed. Commit aborted."
  exit 1
fi
cd ../../

# ----------------------------
# Server formatting
# ----------------------------
cd apps/server || exit 1
echo "â†’ Checking Server formatting..."
make format-check-server
if [ $? -ne 0 ]; then
  echo "âŒ Server formatting failed. Commit aborted."
  exit 1
fi
cd ../../

echo "âœ… All pre-commit checks passed!"
exit 0
